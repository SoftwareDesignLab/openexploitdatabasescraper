{% include 'base.html' %}
{% load static %}
<br>
<h1 style="padding-left: 30px;">Dashboard</h1>
<br>
<div class="row" style="padding-left: 30px; padding-right: 30px">
    <div class="col-sm-4">
        <div class="card border-start-lg border-start-primary">
        <div class="card-body">
          <div class="card-header text-primary mb-3">Exploits Added in the Last 24 Hours</div>
          <h4 > <b>{{24_hours}}</b> </h4>
        </div>
      </div>
    </div>
    <div class="col-sm-4">
      <div class="card border-start-lg border-start-danger">
        <div class="card-body">
          <div class="card-header text-danger mb-3">Exploits Added in the Last 7 Days</div>
          <h4 > <b>{{7_days}}</b></h4>
        </div>
      </div>
    </div>
    <div class="col-sm-4">
        <div class="card border-start-lg border-start-success">
          <div class="card-body">
            <div class="card-header text-success mb-3">Total Exploits Collected  </div>
            <h4><b> {{exploits_count}}</b></h4>
          </div>
        </div>
      </div>
  </div>
  <br>

    <div class="row"  style="padding-left: 20px; padding-right: 20px; padding-top: 20px;">
      <div class="col-sm-8">
        <figure class="highcharts-figure">
            <div id="container">
            </div>
    </figure>
      </div>

<div class="col-sm-4">
    <div class="card">
      <div class="card-body">
        <h5 class="card-title">Breakdown by Source
        <!-- <a href="#" class="btn btn-primary" style="float: right;"> See All</a> -->
        </h5>
        <table class="table table-striped">
          <thead>
            <tr>
                <th>Source</th>
                <th>Count</th>
                <th> Percentage</th>
                <th > &emsp; &emsp; &emsp;  &emsp; </th>
            </tr>
          </thead>
          <tbody>
            {% for source in sources %}
            <tr>
            <td>{{source.source}}</td>
            <td> {{source.count}}</td>
            <td> {{source.percentage}} %</td>
            <td>
            <div class="progress" role="progressbar" aria-label="Example 1px high" aria-valuenow="{{source.percentage}}" aria-valuemin="0" aria-valuemax="100" style="height: 3px">
                <div class="{{source.color}}" style="width: {{source.percentage}}%"></div>
            </div>
            </td>
            </tr>
            {% endfor %}
            </tbody>
            </table>
      </div>
    </div>
  </div>
</div>



  <script>

Highcharts.chart('container', {
    title: {
        text: 'Exploits Added by Month in {{year}}',
        align: 'center',
    },

    data: {
        dateFormat: 'mm/dd/YYYY'
    },
    plotOptions: {
        series: {
            marker: {
                enabled: false
            }
        }
    },
    xAxis: {
        categories: ['Jan', 'Feb', 'Mar', 'Apr', 'May', 'Jun',
            'Jul', 'Aug', 'Sep', 'Oct', 'Nov', 'Dec'],
        accessibility: {
            description: 'Months of the year'
        },
    },
    series:{{data|safe}}
  
});

  </script>