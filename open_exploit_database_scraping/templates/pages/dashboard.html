{% include 'base.html' %}
{% load static %}

<h1 style="padding-left: 20px;">Open Exploit Database Dashboard</h1>
<div class="row" style="padding-left: 20px; padding-right: 20px">
    <div class="col-sm-4">
      <div class="card shadow p-3 mb-5 bg-white rounded">
        <div class="card-body">
         
          <h5 class="card-title">Exploits Added in the last 24 hours   <img src="{% static 'images/menu-bar.png' %}" alt="menu-bar" style="width:15%; padding-left: 25px;"></h5>
          <h4> <b>{{24_hours}}</b></h4>
        </div>
      </div>
    </div>
    <div class="col-sm-4">
      <div class="card shadow p-3 mb-5 bg-white rounded">
        <div class="card-body">
          <h5 class="card-title">Exploits Added in the Last 7 Days<img src="{% static 'images/menu-bar.png' %}" alt="menu-bar" style="width:15%; padding-left: 25px;"></h5>
          <h4 > <b>{{7_days}}</b></h4>
        </div>
      </div>
    </div>
    <div class="col-sm-4">
        <div class="card shadow p-3 mb-5 bg-white rounded">
          <div class="card-body">
            <h5 class="card-title">Total Exploits Collected  <img src="{% static 'images/menu-bar.png' %}" alt="menu-bar" style="width:15%; padding-left: 25px;"></h5>
            <h4><b> {{exploits_count}}</b></h4>
          </div>
        </div>
      </div>
  </div>
  <br>

    <div class="row"  style="padding-left: 20px; padding-right: 20px">
        <figure class="highcharts-figure">
            <div id="container" style="min-width: 310px; max-width: 800px; height: 400px; margin: 0 auto;  border-width: 8px; border-radius: 10px;">
            </div>
    </figure>

<div class="col-sm-4">
    <div class="card shadow p-3 mb-5 bg-white rounded">
      <div class="card-body">
        <h5 class="card-title">Breakdown by Source
        <!-- <a href="#" class="btn btn-primary" style="float: right;"> See All</a> -->
        </h5>
        <table>
            <tr>
                <th>Source</th>
                <th>Count</th>
                <th> Percentage</th>
                <th > &emsp; &emsp; &emsp;  &emsp; </th>
            </tr>
            {% for source in sources %}
            <tr>
            <td>{{source.source}}</td>
            <td> {{source.count}}</td>
            <td> {{source.percentage}} %</td>
            <td>
            <div class="progress" role="progressbar" aria-label="Example 1px high" aria-valuenow="{{source.percentage}}" aria-valuemin="0" aria-valuemax="100" style="height: 3px">
                <div class="{{source.color}}" style="width: {{source.percentage}}%"></div>
            </div>
            </td>
            </tr>
            {% endfor %}
            </table>
      </div>
    </div>
  </div>
</div>



  <script>

Highcharts.chart('container', {
    chart: {
        backgroundColor: '#D3D3D3',
        borderColor: '#302b6d',
        borderWidth: 8,
        type: 'line',
       
    },
    
    title: {
        text: 'Exploits Added by Month in {{year}}',
        align: 'center',
        // style: {
        // padding: '10px',
        //  color: '#FFFFFF',
    //   }
    },

    data: {
        dateFormat: 'mm/dd/YYYY'
    },
    plotOptions: {
        series: {
            marker: {
                enabled: false
            }
        }
    },
    xAxis: {
        categories: ['Jan', 'Feb', 'Mar', 'Apr', 'May', 'Jun',
            'Jul', 'Aug', 'Sep', 'Oct', 'Nov', 'Dec'],
        accessibility: {
            description: 'Months of the year'
        },
    },
    series:{{data|safe}}
  
});

  </script>